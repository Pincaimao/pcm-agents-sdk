# 模拟面试组件文档

## 概述

pcm-mnms-modal 是一个用于进行 AI 模拟面试的 Web 组件，支持简历上传、AI 问答等功能。该组件可以轻松嵌入到现有网页中，实现在线模拟面试功能，帮助用户提前准备面试。

最新版本：

pcm-agents：0.3.0

pcm-agents-react：0.1.0

pcm-agents-vue：0.1.2



## 安装与引入

### 通过 CDN 引入

```html
<script type="module" src="https://s4.zstatic.net/npm/pcm-agents@0.2.4/dist/pcm-agents/pcm-agents.esm.js"></script>
```

```html
<pcm-mnms-modal 
  id="pcm-mnms-modal" 
  api-key="app-fc0r90cHmzmcjK2vwXRKc7pc"
  modal-title="模拟面试" 
  icon="https://example.com/icon.jpg"
  conversation-id=""
  fullscreen="true"
  require-resume="true"
  enable-voice="false"
  interview-mode="text"
  defaultQuery="请您提问"
></pcm-mnms-modal>
```



### react中使用

 下载并导入 pcm-agents 和 pcm-agents-react，具体组件传参方式参考 CDN 引入，这里只演示框架使用形式： 

```react
import './App.css';
import { PcmMnmsModal } from 'pcm-agents-react';

function App() {
  return (
    <div className="App">
      <PcmMnmsModal 
        id="test-pcm-mnms-modal"
        apiKey="app-fc0r90cHmzmcjK2vwXRKc7pc"
        modalTitle="模拟面试"
        fullscreen={true}
        requireResume={true}
      />
    </div>
  );
}

export default App;
```



### vue中使用

 下载并导入 pcm-agents 和 pcm-agents-vue，具体组件传参方式参考 CDN 引入，这里只演示框架使用形式： 



main.ts
```js
import { defineCustomElements } from 'pcm-agents/loader';
defineCustomElements();
```



app.vue

```vue
<template>
  <div>
    <PcmMnmsModal 
      id="test-pcm-mnms-modal"
      :api-key="apiKey"
      :modal-title="modalTitle"
      :fullscreen="true"
    />
  </div>
</template>

<script>
import { PcmMnmsModal } from 'pcm-agents-vue';

export default {
  components: {
    PcmMnmsModal
  },
  data() {
    return {
      apiKey: 'app-fc0r90cHmzmcjK2vwXRKc7pc',
      modalTitle: '模拟面试'
    }
  }
}
</script>
```



### vue2中使用


index.html ，具体组件传参方式参考CDN引入，这里只演示框架使用形式
```html
<script type="module" src="https://s4.zstatic.net/npm/pcm-agents@0.2.4/dist/pcm-agents/pcm-agents.esm.js"></script>
```

```vue
<template>
  <pcm-mnms-modal 
    id="test-pcm-mnms-modal"
    api-key="app-fc0r90cHmzmcjK2vwXRKc7pc"
    modal-title="模拟面试"
  ></pcm-mnms-modal>
</template>
```





## 属性说明

| 属性名 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| api-key | string | - | API 鉴权密钥（必填） |
| modal-title | string | "在线客服" | 模态框标题 |
| icon | string | - | 应用图标 URL |
| z-index | number | 1000 | 聊天框的页面层级 |
| is-show-header | boolean | true | 是否展示顶部标题栏 |
| is-need-close | boolean | true | 是否展示右上角的关闭按钮 |
| is-open | boolean | false | 是否显示聊天模态框 |
| conversation-id | string | - | 会话 ID，用于继续之前的对话 |
| default-query | string | "" | 默认查询文本 |
| fullscreen | boolean | false | 是否以全屏模式打开 |
| is-mobile | boolean | false | 是否为移动端布局 |
| custom-inputs | object | {} | 自定义输入参数，可传递额外信息如职位描述等 |


## 事件

| 事件名 | 说明 | 回调参数 |
|--------|------|----------|
| modalClosed | 模态框关闭时触发 | 无 |
| uploadSuccess | 文件上传成功时触发 | { cos_key, filename, ext, presigned_url } |
| streamComplete | 流式响应完成时触发 | { conversation_id, event, message_id, id } |
| conversationStart | 新会话开始时触发 | { conversation_id, event, message_id, id } |
| interviewComplete | 面试完成时触发 | { conversation_id, total_questions } |

## 集成流程

### 1.  引入组件脚本 

```html
<script type="module" src="https://s4.zstatic.net/npm/pcm-agents@0.2.2/dist/pcm-agents/pcm-agents.esm.js"></script>
```



### 2. 在您的页面中使用组件 

```html
<pcm-mnms-modal 
  id="pcm-mnms-modal" 
  api-key="app-fc0r90cHmzmcjK2vwXRKc7pc"
  modal-title="模拟面试" 
  icon="https://example.com/icon.jpg"
  conversation-id=""
  fullscreen="true"
  require-resume="true"
  enable-voice="false"
  interview-mode="text"
  defaultQuery="请您提问"
></pcm-mnms-modal>
```





### 3.  添加交互逻辑 

```javascript
document.addEventListener('DOMContentLoaded', function() {
  // 获取元素引用
  const chatModal = document.getElementById('pcm-mnms-modal');
  const openChatButton = document.getElementById('open-chat');
  
  // 打开聊天窗口
  openChatButton.addEventListener('click', function() {
    chatModal.isOpen = true;
  });
  
  // 注册事件监听
  chatModal.addEventListener('modalClosed', function() {
    console.log('聊天窗口已关闭');
  });
  
  chatModal.addEventListener('uploadSuccess', function(event) {
    console.log('文件上传成功:', event.detail);
  });
  
  chatModal.addEventListener('streamComplete', function(event) {
    console.log('流式响应完成:', event.detail);
    chatModal.setAttribute('conversation-id', event.detail.conversation_id);
  });
  
  chatModal.addEventListener('conversationStart', function(event) {
    console.log('会话开始:', event.detail);
  });
  
  chatModal.addEventListener('interviewComplete', function(event) {
    console.log('面试完成:', event.detail);
    chatModal.isOpen = false;
    alert('模拟面试已完成，感谢您的参与！');
  });
  
  // 设置自定义输入参数
  chatModal.customInputs = {
    job_info: "对接商家和用户,负责B端活动的策划落地以及C端客户的引流；负责产品的上下架,以及线下活动的开展；负责C端产品的线上线下的引流推广"
  };
});
```





## 完整示例

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>模拟面试</title>
  <script type="module" src="https://s4.zstatic.net/npm/pcm-agents@0.2.7/dist/pcm-agents/pcm-agents.esm.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .demo-controls {
      margin: 20px;
      padding: 20px;
      border: 1px solid #eee;
      border-radius: 8px;
    }
    button {
      padding: 8px 16px;
      background-color: #1890ff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
    }
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="demo-controls">
    <h2>模拟面试助手</h2>
    <p>上传您的简历，获取针对性的面试模拟体验</p>
    <button id="open-chat">开始模拟面试</button>
  </div>

  <pcm-mnms-modal 
    id="pcm-mnms-modal" 
    api-key="app-fc0r90cHmzmcjK2vwXRKc7pc"
    modal-title="模拟面试" 
    icon="https://example.com/icon.jpg"
    conversation-id=""
    fullscreen="true"
    require-resume="true"
    enable-voice="false"
    interview-mode="text"
    defaultQuery="请您提问"
  ></pcm-mnms-modal>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 获取元素引用
      const chatModal = document.getElementById('pcm-mnms-modal');
      const openChatButton = document.getElementById('open-chat');
      
      // 打开聊天窗口
      openChatButton.addEventListener('click', function() {
        chatModal.isOpen = true;
      });
      
      // 注册事件监听
      chatModal.addEventListener('modalClosed', function() {
        console.log('聊天窗口已关闭');
      });
      
      chatModal.addEventListener('uploadSuccess', function(event) {
        console.log('文件上传成功:', event.detail);
      });
      
      chatModal.addEventListener('streamComplete', function(event) {
        console.log('流式响应完成:', event.detail);
        chatModal.setAttribute('conversation-id', event.detail.conversation_id);
      });
      
      chatModal.addEventListener('conversationStart', function(event) {
        console.log('会话开始:', event.detail);
      });
      
      chatModal.addEventListener('interviewComplete', function(event) {
        console.log('面试完成:', event.detail);
        chatModal.isOpen = false;
        alert('模拟面试已完成，感谢您的参与！');
      });
      
      // 设置自定义输入参数
      chatModal.customInputs = {
        job_info: "对接商家和用户,负责B端活动的策划落地以及C端客户的引流；负责产品的上下架,以及线下活动的开展；负责C端产品的线上线下的引流推广"
      };
    });
  </script>
</body>
</html>
```



